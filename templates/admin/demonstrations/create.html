{% extends 'admin_base.html' %}

{% block main_content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin_create_demo.css') }}">

<div class="container mt-4">
    <h2>Create New Demonstration</h2>
    <form method="POST" action="{{ url_for('admin_demo.create_demo') }}">
        <!-- Existing form fields for demonstration details -->
        <div class="form-group">
            <label for="title">Title</label>
            <input type="text" id="title" name="title" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" id="date" name="date" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="start_time">Start Time</label>
            <input type="time" id="start_time" name="start_time" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="end_time">End Time</label>
            <input type="time" id="end_time" name="end_time" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="topic">Topic</label>
            <input type="text" id="topic" name="topic" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="facebook">Facebook Link</label>
            <input type="url" id="facebook" name="facebook" class="form-control">
        </div>
        <div class="form-group">
            <label for="city">City</label>
            <input type="text" id="city" name="city" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="address">Address</label>
            <input type="text" id="address" name="address" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="type">Type</label>
            <input type="text" id="type" name="type" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="route">Route (if applicable)</label>
            <input type="text" id="route" name="route" class="form-control">
        </div>

        <h4>Organizer Information</h4>

        <!-- Dropdown for selecting an existing organization -->
        <div class="form-group">
            <label for="organization-select">Select Organizer</label>
            <select id="organization-select" name="organization_id" class="form-control" onchange="toggleManualEntry(this)">
                <option value="" selected>Select an existing organization</option>
                {% for org in organizations %}
                <option value="{{ org._id }}">{{ org.name }}</option>
                {% endfor %}
                <option value="manual">Enter details manually</option>
            </select>
        </div>

        <!-- Fields for manual entry (hidden initially) -->
        <div id="manual-entry-fields" style="display: none;">
            <div class="form-group">
                <label for="organizer_name">Organizer Name</label>
                <input type="text" id="organizer_name" name="organizer_name" class="form-control">
            </div>
            <div class="form-group">
                <label for="organizer_email">Organizer Email</label>
                <input type="email" id="organizer_email" name="organizer_email" class="form-control">
            </div>
            <div class="form-group">
                <label for="organizer_website">Organizer Website</label>
                <input type="url" id="organizer_website" name="organizer_website" class="form-control">
            </div>
        </div>

        <button type="submit" class="submit-button">Create Demonstration</button>
    </form>
</div>

<script>
    function toggleManualEntry(select) {
        const manualFields = document.getElementById('manual-entry-fields');
        if (select.value === 'manual') {
            manualFields.style.display = 'block';
        } else {
            manualFields.style.display = 'none';
        }
    }
</script>
{% endblock %}
