{% extends 'admin_base.html' %}

{% block main_content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin_demo_control.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/table.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/form.css') }}">

<h2>Mielenosoitukset</h2>

<div class="mb-3">
    <a href="{{ url_for('admin_demo.create_demo') }}" class="button create-demo-button">Uusi mielenosoitus</a>
</div>

<form method="GET" class="search-form" action="{{ url_for('admin_demo.demo_control') }}">
    <label for="search">Hae mielenosoituksia:</label>
    <input type="text" id="search" name="search" class="search-input" placeholder="Hae mielenosoituksia..."
        value="{{ search_query }}">

    <label for="approved">Hyväksytty:</label>
    <select name="approved" id="approved" class="filter-select">
        <option value="" {% if approved_status=="" %}selected{% endif %}>Kaikki</option>
        <option value="true" {% if approved_status=="true" %}selected{% endif %}>Hyväksytty</option>
        <option value="false" {% if approved_status=="false" %}selected{% endif %}>Odottaa</option>
    </select>

    <button type="submit" class="search-button">Hae</button>
</form>

{% if demonstrations %}
<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>Otsikko</th>
                <th>Kaupunki</th>
                <th>Päivämäärä</th>
                <th>Hyväksytty</th>
                <th>Toiminnot</th>
            </tr>
        </thead>
        <tbody>
            {% for demo in demonstrations %}
            <tr>
                <td>{{ demo.title }}</td>
                <td>{{ demo.city }}</td>
                <td>{{ demo.date }}</td>
                <td>{{ 'Kyllä' if demo.approved else 'Ei' }}</td>
                <td>
                    <a href="{{ url_for('admin_demo.edit_demo', demo_id=demo._id) }}"
                        class="button edit-button">Muokkaa</a>
                    <a href="{{ url_for('admin_demo.confirm_delete_demo', demo_id=demo._id) }}"
                        class="button delete-button">Poista</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="no-demos">
    <p>Mielenosoituksia ei löytynyt.</p>
</div>
{% endif %}
{% endblock %}