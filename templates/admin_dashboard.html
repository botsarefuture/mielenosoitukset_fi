{% extends 'base.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin_dashboard.css') }}">

<div class="dashboard-container">
    <h2>Hallintapaneeli</h2>

    <!-- Pending Demonstrations -->
    <h3>Odottelevat mielenosoitukset</h3>
    <ul class="demo-list">
        {% for demo in pending_demos %}
        <li class="demo-item">
            <div class="demo-header">
                <h4>{{ demo['title'] }}</h4>
            </div>
            <div class="demo-details">
                <p><strong>Päivämäärä:</strong> {{ demo['date'] }} | {{ demo['start_time'] }} - {{ demo['end_time'] }}</p>
                <p><strong>Aihe:</strong> {{ demo['topic'] }}</p>
                <p><strong>Sijainti:</strong> {{ demo['city'] }}, {{ demo['address'] }}</p>
                <p><strong>Facebook:</strong> 
                    {% if demo['facebook'] %}
                        <a href="{{ demo['facebook'] }}" target="_blank">{{ demo['facebook'] }}</a>
                    {% else %}
                        Ei linkkiä
                    {% endif %}
                </p>
            </div>
            <div class="organizers">
                <strong>Organisaattorit:</strong>
                {% if demo['organizers'] %}
                    <div class="organizers-list">
                        {% for organizer in demo['organizers'] %}
                        <div class="organizer">
                            <p><strong>Nimi:</strong> {{ organizer['name'] }}</p>
                            <p><strong>Nettisivu:</strong> 
                                {% if organizer['website'] %}
                                    <a href="{{ organizer['website'] }}" target="_blank">{{ organizer['website'] }}</a>
                                {% else %}
                                    Ei nettisivua
                                {% endif %}
                            </p>
                            <p><strong>Sähköposti:</strong> {{ organizer['email'] }}</p>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <p>Ei organisaattoreita</p>
                {% endif %}
            </div>
            <div class="demo-actions">
                <a href="{{ url_for('admin.approve_demo', demo_id=demo['_id']) }}" class="button approve-button">Hyväksy</a>
                <a href="{{ url_for('admin.reject_demo', demo_id=demo['_id']) }}" class="button reject-button">Hylkää</a>
            </div>
        </li>
        {% else %}
        <li>Ei odottavia mielenosoituksia.</li>
        {% endfor %}
    </ul>

    <!-- Pending Organizations -->
    <h3>Odottelevat organisaatiot</h3>
    <ul class="org-list">
        {% for org in pending_orgs %}
        <li class="org-item">
            <div class="org-header">
                <h4>{{ org['name'] }}</h4>
            </div>
            <div class="org-details">
                <p><strong>Sähköposti:</strong> {{ org['email'] }}</p>
                <p><strong>Nettisivu:</strong> 
                    {% if org['website'] %}
                        <a href="{{ org['website'] }}" target="_blank">{{ org['website'] }}</a>
                    {% else %}
                        Ei nettisivua
                    {% endif %}
                </p>
            </div>
            <div class="org-actions">
                <a href="{{ url_for('admin.approve_org', org_id=org['_id']) }}" class="button approve-button">Hyväksy</a>
                <a href="{{ url_for('admin.reject_org', org_id=org['_id']) }}" class="button reject-button">Hylkää</a>
            </div>
        </li>
        {% else %}
        <li>Ei odottavia organisaatioita.</li>
        {% endfor %}
    </ul>
</div>

{% endblock %}
