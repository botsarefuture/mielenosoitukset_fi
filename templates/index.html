{% extends 'base.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/buttons.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/list.css') }}">

<div class="container-main-content">
    <div class="container-welcome container-centered">
        <h2>Tervetuloa Mielenosoitukset.fi:hin</h2>
        <p>Mielenosoitukset.fi tarjoaa ajankohtaiset tiedot mielenosoituksista ympäri Suomen. <br> Pyrimme tekemään osallistumisesta mielenosoituksiin mahdollisimman vaivatonta ja sujuvaa.</p>
        <div class="buttons-div">
            <a class="button button-primary" href="{{ url_for('info') }}">Lue lisää</a>
            <a class="button button-primary" href="{{ url_for('submit') }}">Ilmoita mielenosoituksesta</a>
        </div>
    </div>

    <!-- Search Form -->
    <form action="{{ url_for('index') }}" method="GET" class="container-form">
        <input type="text" name="search" placeholder="Hae mielenosoituksia..." aria-label="Hae mielenosoituksia">
        <button type="submit">Hae</button>
    </form>

    <!-- Pinned Demonstrations Section -->
    {% if pinned_demonstrations %}
    <h2>Suosittelemme</h2>
    <div class="container-grid">
            {% for demo in pinned_demonstrations %}
            <div class="grid-item">
                <a href="{{ url_for('demonstration_detail', demo_id=demo['_id']) }}" class="grid-link">
                    <div class="title">{{ demo['title'] }}</div>
                    <div class="details">
                        <div class="date-time">
                            <span class="date">{{ demo['date'] }}</span> |
                            <span class="time">{{ demo['start_time'] }} - {{ demo['end_time'] }}</span>
                        </div>
                        <div class="topics">
                            <ul>
                                {% if demo["tags"] and demo["tags"]|length > 0 %}
                                    {% for tag in demo["tags"] %}
                                        <li>
                                                <span class="tag">#{{ tag }}</span>
                                        </li>
                                    {% endfor %}
                                {% else %}
                                    <li><span class="tag">#{{ demo['topic'] }}</span></li>
                                {% endif %}
                            </ul>
                        </div>
                        <span class="city">
                            <i class="fa-solid fa-city"></i> {{ demo['city'] }}
                        </span><br>
                        <span class="location">
                            <i class="fa-solid fa-location-dot"></i> {{ demo['address'] }}
                        </span>
                    </div>
                </a>
            </div>
            {% endfor %}
    </div>
    {% endif %}

    <!-- Featured Demonstrations Section -->
    <h2>Esitellyt mielenosoitukset</h2>
    <div class="container-grid">
            {% if demonstrations %}
            {% for demo in demonstrations[:6] %}
            <div class="grid-item">
                <a href="{{ url_for('demonstration_detail', demo_id=demo['_id']) }}" class="grid-link">
                    <div class="title">{{ demo['title'] }}</div>
                    <div class="details">
                        <div class="date-time">
                            <span class="date">{{ demo['date'] }}</span> |
                            <span class="time">{{ demo['start_time'] }} - {{ demo['end_time'] }}</span>
                        </div>
                        <div class="topics">
                            <ul>
                                {% if demo["tags"] and demo["tags"]|length > 0 %}
                                    {% for tag in demo["tags"] %}
                                        <li>
                                                <span class="tag">#{{ tag }}</span>
                                        </li>
                                    {% endfor %}
                                {% else %}
                                    <li><span class="tag">#{{ demo['topic'] }}</span></li>
                                {% endif %}
                            </ul>
                        </div>
                        <span class="city">
                            <i class="fa-solid fa-city"></i> {{ demo['city'] }}
                        </span><br>
                        <span class="location">
                            <i class="fa-solid fa-location-dot"></i> {{ demo['address'] }}
                        </span>
                    </div>
                </a>
            </div>
            {% endfor %}
            {% else %}
            <div class="grid-item">Ei mielenosoituksia näytettäväksi.</div>
            {% endif %}
    </div>

    <!-- Button to View All Demonstrations -->
    <div class="buttons-div">
        <a class="button button-primary" href="{{ url_for('demonstrations') }}">Näytä kaikki mielenosoitukset</a>
    </div>
</div>

{% endblock %}
