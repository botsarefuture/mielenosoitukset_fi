{% extends 'base.html' %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/list.css') }}">
<div class="container-main-content">
    <h1>Tulevat mielenosoitukset</h1>

    <!-- Extended search form for filtering demonstrations -->
    <form method="GET" action="{{ url_for('demonstrations') }}" class="search-form">
        <input type="text" name="search" placeholder="Hae mielenosoituksia..." aria-label="Hae mielenosoituksia" value="{{ request.args.get('search', '') }}">
        
        <input type="text" name="city" placeholder="Kaupunki" aria-label="Kaupunki" value="{{ request.args.get('city', '') }}">
        
        <input type="text" name="location" placeholder="Sijainti" aria-label="Sijainti" value="{{ request.args.get('location', '') }}">
        
        <input type="text" name="date" placeholder="Päivämäärä (pp.kk.vvvv)" aria-label="Päivämäärä (pp.kk.vvvv)" value="{{ request.args.get('date', '') }}">
        
        <input type="text" name="topic" placeholder="Aihe" aria-label="Aihe" value="{{ request.args.get('topic', '') }}">
        
        <button type="submit">Hae</button>
    </form>

    <div class="container-grid">
        {% if demonstrations|length > 0 %}
            {% for demo in demonstrations %}
            <div class="grid-item">
                <a href="{{ url_for('demonstration_detail', demo_id=demo['_id']) }}" class="title">{{ demo['title'] }}</a>
                <div class="details">
                    <span class="date">{{ demo['date'] }}</span> |
                    <span class="time">{{ demo['start_time'] }} - {{ demo['end_time'] }}</span><br>
                    <span class="topic">Aihe: {{ demo['topic'] }}</span><br>
                    <span class="location">Sijainti: {{ demo['address'] }}, {{ demo['city'] }}</span>
                </div>
            </div>
            {% endfor %}
        {% else %}
        <div class="grid-item no-results">Ei löytynyt mielenosoituksia.</div>
        {% endif %}
    </div>
</div>
{% endblock %}
