<div class="form-group required">
    <label for="city">Paikkakunta<span class="required-asterisk">*</span></label>
    <div id="paikkakunta-drop" class="dropdown">
      <button type="button" class="dropbtn">Paikkakunta</button>
      <div id="dropdown-content" class="dropdown-content">
        <input type="text" placeholder="Hae paikkakunta..." id="searchInput" onkeyup="filterFunction()" />
        <!-- List of cities -->
        {% for city in city_list %}
        <a href="#" onclick="selectCity('{{ city }}'); return false;">{{ city }}</a>
        {% endfor %}
      </div>
    </div>
    <input type="hidden" id="selected-city" name="city" value="" required />
  </div>
  
  <script>
    // Paikkakunta dropdown functions
    document.querySelector(".dropbtn").addEventListener("click", function (event) {
      event.stopPropagation(); // Prevent click event from bubbling
      var dropdownContent = document.getElementById("dropdown-content");
      dropdownContent.style.display = dropdownContent.style.display === "block" ? "none" : "block";
    });
  
    window.onclick = function (event) {
      if (!event.target.matches('.dropbtn') && !event.target.closest('.dropdown')) {
        document.getElementById("dropdown-content").style.display = "none";
      }
    };
  
    function selectCity(city) {
      document.querySelector(".dropbtn").textContent = city;
      document.getElementById("selected-city").value = city;
      document.getElementById("dropdown-content").style.display = "none";
    }
  
    function filterFunction() {
      let input, filter, div, a, i;
      input = document.getElementById("searchInput");
      filter = input.value.toUpperCase();
      div = document.getElementById("dropdown-content");
      a = div.getElementsByTagName("a");
  
      for (i = 0; i < a.length; i++) {
        let txtValue = a[i].textContent || a[i].innerText;
        a[i].style.display = txtValue.toUpperCase().indexOf(filter) > -1 ? "" : "none";
      }
    }
  </script>
  
  <style>
    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f9f9f9;
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      z-index: 1;
    }
    .dropbtn {
      padding: 10px;
      border: 1px solid #ccc;
      background-color: white;
      cursor: pointer;
    }
    .dropdown-content a {
      color: black;
      padding: 10px;
      text-decoration: none;
      display: block;
    }
    .dropdown-content a:hover {
      background-color: #f1f1f1;
    }
  </style>
  