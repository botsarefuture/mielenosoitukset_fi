<!-- Link to Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<link rel="stylesheet" href="{{ url_for('static', filename='css/container.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/sidebar.css') }}">

<style>
    li {
        list-style: none;
    }

    span.icon {
        margin-right: 20px;
    }

    .ddos-button {
        background-color: #E03C31; /* Red color for the button */
        color: #FFFFFF;
        padding: 10px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        display: flex;
        align-items: center;
    }

    .ddos-button i {
        margin-right: 8px;
    }
</style>

<div class="container-sidebar bg-header-footer">
    <a class="sidebar-toggle" id="maintoggle" aria-label="Avaa sivupalkki">&#9776;</a>
    <h2 class="sidebar-title" style="color: white;">Superkäyttäjän työkalupakki</h2> <!-- Sidebar Title -->
    <nav class="sidebar-nav">
        <ul>
            <li>
                <a href="{{ url_for('admin.admin_dashboard') }}">
                    <span class="icon"><i class="fas fa-book"></i></span> Superkäyttäjän käsikirja
                </a>
            </li>
            <li>
                <a href="{{ url_for('admin_user.user_control') }}">
                    <span class="icon"><i class="fas fa-users"></i></span> Käyttäjien hallinta
                </a>
            </li>
            <li>
                <a href="{{ url_for('admin_org.organization_control') }}">
                    <span class="icon"><i class="fas fa-building"></i></span> Organisaatioiden hallinta
                </a>
            </li>
            <li>
                <a href="{{ url_for('admin_demo.demo_control') }}">
                    <span class="icon"><i class="fas fa-bullhorn"></i></span> Mielenosoitusten hallinta
                </a>
            </li>
            <li>
                <a href="{{ url_for('admin.settings') }}">
                    <span class="icon"><i class="fas fa-cog"></i></span> Asetukset
                </a>
            </li>
            <li>
                <a href="{{ url_for('admin.stats') }}">
                    <span class="icon"><i class="fas fa-chart-line"></i></span> Tilastot
                </a>
            </li>
            <li>
                <a href="{{ url_for('admin.help') }}">
                    <span class="icon"><i class="fas fa-question-circle"></i></span> Ohjeet
                </a>
            </li>
            <li>
                <a href="{{ url_for('admin.admin_logout') }}">
                    <span class="icon"><i class="fas fa-sign-out-alt"></i></span> Kirjaudu ulos
                </a>
            </li>
            <li>
                <button class="ddos-button" id="ddosButton">
                    <span class="icon"><i class="fas fa-tower-broadcast"></i></span> Aloita DDoS Suojautuminen
                </button>
            </li>
        </ul>
    </nav>

    <!-- Shortened notice at the bottom of the sidebar -->
    <div class="sidebar-info bg-warning">
        <span class="warning-icon"><i class="fas fa-exclamation-triangle"></i></span> <!-- Warning icon -->
        <p>Olet superkäyttäjätilassa.</p>
    </div>
</div>

<!-- Hidden icons section -->
<div class="hidden-icons container-centered bg-main-content">
    <a class="hidden-icon" id="hiddentoggle" aria-label="Avaa sivupalkki">&#9776;</a> <!-- Sidebar Toggle Button -->
    <a href="{{ url_for('admin.admin_dashboard') }}" class="hidden-icon"><i class="fas fa-book"></i></a>
    <a href="{{ url_for('admin_user.user_control') }}" class="hidden-icon"><i class="fas fa-users"></i></a>
    <a href="{{ url_for('admin_org.organization_control') }}" class="hidden-icon"><i class="fas fa-building"></i></a>
    <a href="{{ url_for('admin_demo.demo_control') }}" class="hidden-icon"><i class="fas fa-bullhorn"></i></a>
    <a href="{{ url_for('admin.settings') }}" class="hidden-icon"><i class="fas fa-cog"></i></a>
    <a href="{{ url_for('admin.stats') }}" class="hidden-icon"><i class="fas fa-chart-line"></i></a>
    <a href="{{ url_for('admin.help') }}" class="hidden-icon"><i class="fas fa-question-circle"></i></a>
    <a href="{{ url_for('admin.admin_logout') }}" class="hidden-icon"><i class="fas fa-sign-out-alt"></i></a>
</div>

<script src="{{ url_for('static', filename='js/sidebar.js') }}"></script>

<script>
    document.getElementById('ddosButton').addEventListener('click', function() {
        // Start DDoS protection sequence
        activateProtection();
    });

    function activateProtection() {
        if (confirm("Oletko varma, että haluat aloittaa DDoS suojautumisen? Tämä toimenpide on kriittinen!")) {
            // POST request to /admin/DDOS
            fetch('/admin/DDOS', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ action: 'start' }) // Optional payload
            })
            .then(response => {
                if (response.ok) {
                    alert("DDoS suojautuminen aktivoitu! Sivusto on nyt suojattu.");
                    window.location.href = 'protection.html'; // Redirect to a protection page
                } else {
                    alert("DDoS suojautumisen aktivointi epäonnistui. Yritä uudelleen.");
                }
            })
            .catch(error => {
                console.error("Virhe DDoS suojautumisessa:", error);
                alert("Virhe DDoS suojautumisessa. Tarkista konsoli.");
            });
        }
    }
</script>
